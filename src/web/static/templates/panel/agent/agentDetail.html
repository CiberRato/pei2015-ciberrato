<div class="content-block" role="main" ng-controller="AgentDetailController">
    <!-- Grid row -->
    <div class="row">

        <!-- Data block -->
        <article class="span12 data-block">
            <div class="data-container">
                <section class="tab-content">

                    <!-- Tab #static -->
                    <div class="tab-pane active" id="static">
                        <h2><span id="agent_name">{{vm.agent.agent_name}}</span> ({{vm.agent.group_name}})</h2>
                        <p ng-if="vm.files.length != 0 && vm.agent.is_virtual == false">Here is shown in table the list of all uploaded files of this agent.</p>
                        <p ng-if="vm.files.length == 0 && vm.agent.is_virtual == false">This agent doesn't have any uploaded file.</p>
                        <table ng-if="vm.files.length != 0 && vm.agent.is_virtual == false" class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>File Name</th>
                                <th>Remove Agent</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="(key,value) in vm.files">
                                <td><a href="/api/v1/agents/file/{{vm.agent.agent_name}}/{{value.file}}/" target="_blank">{{value.file}}</a></td>
                                <td><a ng-click="vm.deleteUpload(value.file)" class="btn btn-primary btn-flat">X</a></td>
                            </tr>
                            </tbody>

                        </table>
                        <div align="right">
                            <a href="/api/v1/agents/agent_all_files/{{vm.agent.agent_name}}/" target="_blank">Download All</a>
                        </div>
                            <a ng-if="vm.agent.is_virtual == false" data-toggle="modal"  href="#uploadCode" class="btn btn-alt btn-large btn-success">Upload File for this Agent</a>

                            <div class="modal fade"  id="uploadCode">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">Ã—</button>

                                    <h2 align="center">Upload your code</h2>
                                </div>
                                <div class="modal-body">
                                    <section>
                                        <p> Upload your file code here! Select <strong>Add files</strong> and next choose the file through your browse.</p>
                                        <p> When the file code is choosen, then upload him clicking on button <strong>Start upload</strong> and after these you can see your file code in the square above, allowing to you to download if you want to see him.
                                        <select id="selector_language">
                                            <option ng-repeat="(key, value) in vm.languages" value="{{value.value}}">{{value.name}}</option>
                                        </select>

                                    </section>
                                    <input id="fileupload"
                                           type="file" name="files[]"
                                           class="inputFile clickable"
                                           />

                                </div>
                                <div class="modal-footer">

                                    <button class="btn btn-alt btn-success" data-dismiss="modal" ng-click="vm.uploadFile()">Upload</button>

                                </div>
                            </div>
                    </div>

                    <hr ng-if="vm.agent.is_virtual == false"/>
                    <h3>Associate this agent to a competition:</h3>
                    <p ng-if="vm.competitions.length == 0">There are no able competitions to associate this agent! Please validate your inscription.</p>
                    <select ng-if="vm.competitions.length != 0"  id="selector_agent">
                        <option ng-repeat="(key, value) in vm.competitions">{{value.name}}</option>
                    </select>
                    <p></p>
                    <a ng-if="vm.competitions.length != 0" ng-click="vm.associate()" class="btn btn-alt btn-large btn-success">Associate Agent</a>



                </section>
                <hr/>
                <a href="javascript:history.go(-1)" class="btn btn-alt btn-large btn-primary">Back</a>


            </div>

        </article>
    </div>
</div>


